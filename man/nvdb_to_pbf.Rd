% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/nvdb_to_pbf.R
\name{nvdb_to_pbf}
\alias{nvdb_to_pbf}
\title{Convert NVDB data to OSM PBF using parallel processing (WKB optimized)}
\usage{
nvdb_to_pbf(
  input_path,
  output_pbf,
  municipality_codes = NULL,
  county_codes = NULL,
  split_by = c("municipality", "county", "none"),
  use_geoparquet = "auto",
  presplit = FALSE,
  max_retries = 2,
  duckdb_memory_limit = 4,
  duckdb_threads = 1
)
}
\arguments{
\item{input_path}{Path to input file (.gdb, .gpkg, or .geoparquet)}

\item{output_pbf}{Path to final output .osm.pbf}

\item{municipality_codes}{Optional vector of 4-digit municipality codes to process (default: all)}

\item{county_codes}{Optional vector of 2-digit county codes to process (e.g., "01" for Stockholm)}

\item{split_by}{Strategy for splitting the work: "municipality" (default), "county", or "none" (process whole file in one go).}

\item{use_geoparquet}{Use GeoParquet for faster processing: "auto", TRUE, or FALSE (default: "auto")}

\item{presplit}{Logical: whether to pre-split to temp files (default: FALSE)}

\item{max_retries}{Maximum retries for failed municipalities (default: 2)}

\item{duckdb_memory_limit}{Memory limit for DuckDB in GB (numeric). Default 4.}

\item{duckdb_threads}{Number of threads for DuckDB. Default 1 (ideal for parallel runs).}
}
\value{
Path to output PBF file (invisibly)
}
\description{
Convert NVDB data to OSM PBF using parallel processing (WKB optimized)
}
\details{
This function supports parallel processing via the \code{mirai} package.
To run in parallel, you must set up mirai daemons before calling this function,
for example using \code{mirai::daemons(n_workers)}.
If no daemons are active, processing will happen sequentially.

Splitting by "municipality" is recommended for high-core counts as it provides
more granular tasks (~290 tasks). "county" provides ~21 tasks.
"none" handles everything in a single process (memory intensive for large areas).
}
